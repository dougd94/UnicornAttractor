{% extends 'base.html' %} {% block page_title %}Home Page{% endblock %} {% block page_heading %}Home{% endblock %} 
{% block head_js %}
<!--charts javascript-->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
<script>
var endpoint='{% url "Get_Data"  %}';
var DefaultData =[]
var labels= []
var labels2 = []
var DefaultData2 = []
$.ajax( {
    method: "GET",
    url: endpoint,
    // ammount of paid features and bugs
    success: function(data) {
        labels= data.labels;
        DefaultData = data.default;
        var ctx=document.getElementById('myChart').getContext('2d');
        var myChart=new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: labels,
                datasets: [ {
                    label: 'A count of bugs and features.',
                    data: DefaultData,
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',],
                     borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',],
                    borderWidth: 1
                }]
            }
        })
        // chart 2 unpaid + paid features
        labels2= data.labels2;
        DefaultData2 = data.default5;
        // DefaultData3 = data.default3;
        var ctx2=document.getElementById('paidfeatures').getContext('2d');
        var paidfeatures=new Chart(ctx2, {
            type: 'bar',
            options: {
                legend: {
                    display: false,
                }
            },
            data: {
                labels: labels2,
                datasets: [ {
                    label: 'Features',
                    data: DefaultData2,
                    backgroundColor: [
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                    ],
                     borderColor: [
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)', ],
                        borderWidth:1
                }]
            }
        })
    },
        // var DefaultData2=[]
        // var labels=[]
        // paid and unpaid features chart
       
        error: function(error_data) {
            console.log("error");
            console.log(error_data);
        }
    }) 

</script>
{% endblock %}
{% block content %}
<div class="jumbotron">
    <h1>Unicorn Attractor</h1>
    <p>Our unique business model allows you to pay for features you want us to implement, you can add bugs you wish to be fixed for <strong>free!</strong></p>
    <p>We spend most of our time on payed features.
        <div class="progress progress-striped active">
            <div class="progress-bar" style="width: 75%">
            </div>
        </div>
    </p>
<p><a href="{% url 'registration'%}" class="btn btn-primary btn-lg">Sign Up</a></p>
</div>
<div class="col-12 text-center"><h2>Statistics</h2></div>
<div class="col-md-6 col-xs-12">
    <label for "myChart">Ammount of bugs and paid features.</label>
    <canvas id="myChart"></canvas>
</div>
<br>
<div class="col-md-6 col-xs-12">
    <label for"paidfeatures">Ammount of paid and unpaid features</label>
    <canvas id="paidfeatures"></canvas>
</div>

{% endblock %}
